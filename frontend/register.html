<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EcoQuest â€“ Create Account</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    /* Student palette */
    --s-main: #5ec987;
    --s-accent: #a8e63d;
    --s-glow: rgba(94,201,135,0.25);

    /* Teacher palette */
    --t-main: #42b0e8;
    --t-accent: #78dfff;
    --t-glow: rgba(66,176,232,0.25);

    /* School palette */
    --sc-main: #f5a623;
    --sc-accent: #ffe066;
    --sc-glow: rgba(245,166,35,0.25);

    --forest: #0d2416;
    --card-bg: rgba(10,28,18,0.8);
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    font-family: 'Nunito', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
    background: #061410;
  }

  /* â”€â”€ CANVAS â”€â”€ */
  #bg-canvas { position:fixed; inset:0; z-index:0; }

  /* â”€â”€ PARTICLE â”€â”€ */
  .particle-layer { position:fixed; inset:0; z-index:1; pointer-events:none; }
  .leaf-particle {
    position:absolute;
    opacity:0;
    animation: leafFall linear infinite;
    pointer-events:none;
  }
  @keyframes leafFall {
    0%   { transform: translateY(-60px) rotate(0deg); opacity:0; }
    10%  { opacity:0.7; }
    90%  { opacity:0.5; }
    100% { transform: translateY(110vh) rotate(720deg); opacity:0; }
  }

  /* â”€â”€ FOREST BOTTOM â”€â”€ */
  .forest-overlay { position:fixed; bottom:0; left:0; right:0; height:200px; z-index:2; pointer-events:none; }

  /* â”€â”€ HEADER BAR â”€â”€ */
  header {
    position:relative;
    z-index:20;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding: 22px 40px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
    background: rgba(6,20,16,0.7);
    backdrop-filter: blur(12px);
  }

  .header-brand {
    display:flex;
    align-items:center;
    gap:12px;
  }

  .logo-icon {
    width:44px; height:44px;
    background: linear-gradient(135deg, #2d7a4f, #a8e63d);
    border-radius:12px;
    display:flex; align-items:center; justify-content:center;
    font-size:22px;
    box-shadow: 0 4px 20px rgba(94,201,135,0.35);
  }

  .header-brand-name {
    font-family:'Playfair Display', serif;
    font-size:1.5rem;
    font-weight:900;
    color:#a8e63d;
    letter-spacing:-0.5px;
  }

  .header-right {
    font-size:0.85rem;
    color:rgba(255,255,255,0.4);
  }
  .header-right a {
    color:#5ec987;
    font-weight:800;
    text-decoration:none;
  }
  .header-right a:hover { color:#a8e63d; }

  /* â”€â”€ MAIN WRAP â”€â”€ */
  .main-wrap {
    position:relative;
    z-index:10;
    max-width:880px;
    margin:0 auto;
    padding: 40px 20px 100px;
  }

  /* â”€â”€ PAGE HEADING â”€â”€ */
  .page-heading {
    text-align:center;
    margin-bottom:34px;
    animation: fadeUp 0.7s ease both;
  }

  @keyframes fadeUp {
    from { opacity:0; transform:translateY(20px); }
    to   { opacity:1; transform:translateY(0); }
  }

  .page-heading h1 {
    font-family:'Playfair Display', serif;
    font-size:2.4rem;
    font-weight:900;
    color:#fff;
    line-height:1.1;
  }

  .page-heading h1 span {
    background: linear-gradient(90deg, #5ec987, #a8e63d);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .page-heading p {
    margin-top:10px;
    color:rgba(255,255,255,0.4);
    font-size:0.92rem;
  }

  /* â”€â”€ ROLE TABS â”€â”€ */
  .role-tabs {
    display:flex;
    gap:12px;
    justify-content:center;
    margin-bottom:34px;
    animation: fadeUp 0.7s 0.1s ease both;
  }

  .role-tab {
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:8px;
    padding:18px 36px;
    background: rgba(255,255,255,0.03);
    border: 2px solid rgba(255,255,255,0.08);
    border-radius:18px;
    cursor:pointer;
    transition: all 0.28s cubic-bezier(.22,1,.36,1);
    min-width:150px;
    font-family:'Nunito', sans-serif;
    color:rgba(255,255,255,0.4);
  }

  .role-tab .tab-icon {
    font-size:2rem;
    filter:grayscale(0.6);
    transition:filter 0.25s, transform 0.25s;
  }

  .role-tab .tab-label {
    font-size:0.95rem;
    font-weight:800;
    text-transform:uppercase;
    letter-spacing:1px;
  }

  .role-tab .tab-desc {
    font-size:0.72rem;
    opacity:0.6;
    font-weight:600;
    text-transform:none;
    letter-spacing:0;
  }

  .role-tab:hover {
    background: rgba(255,255,255,0.06);
    transform:translateY(-3px);
  }

  .role-tab.active-student {
    border-color:var(--s-main);
    background: rgba(94,201,135,0.09);
    color:var(--s-main);
    box-shadow: 0 0 30px var(--s-glow);
  }
  .role-tab.active-student .tab-icon { filter:none; transform:scale(1.1); }

  .role-tab.active-teacher {
    border-color:var(--t-main);
    background: rgba(66,176,232,0.09);
    color:var(--t-main);
    box-shadow: 0 0 30px var(--t-glow);
  }
  .role-tab.active-teacher .tab-icon { filter:none; transform:scale(1.1); }

  .role-tab.active-school {
    border-color:var(--sc-main);
    background: rgba(245,166,35,0.09);
    color:var(--sc-main);
    box-shadow: 0 0 30px var(--sc-glow);
  }
  .role-tab.active-school .tab-icon { filter:none; transform:scale(1.1); }

  /* â”€â”€ FORM CARD â”€â”€ */
  .form-card {
    background: var(--card-bg);
    backdrop-filter: blur(28px);
    border: 1.5px solid rgba(255,255,255,0.08);
    border-radius:28px;
    padding:44px 48px;
    animation: fadeUp 0.7s 0.15s ease both;
    transition: border-color 0.4s, box-shadow 0.4s;
  }

  .form-card.theme-student { border-color:rgba(94,201,135,0.25); box-shadow:0 30px 80px rgba(0,0,0,0.45), 0 0 50px rgba(94,201,135,0.06) inset; }
  .form-card.theme-teacher { border-color:rgba(66,176,232,0.25); box-shadow:0 30px 80px rgba(0,0,0,0.45), 0 0 50px rgba(66,176,232,0.06) inset; }
  .form-card.theme-school  { border-color:rgba(245,166,35,0.25); box-shadow:0 30px 80px rgba(0,0,0,0.45), 0 0 50px rgba(245,166,35,0.06) inset; }

  /* â”€â”€ FORM SECTION HEADER â”€â”€ */
  .section-header {
    display:flex;
    align-items:center;
    gap:14px;
    margin-bottom:28px;
    padding-bottom:18px;
    border-bottom:1px solid rgba(255,255,255,0.07);
  }

  .section-badge {
    width:48px; height:48px;
    border-radius:14px;
    display:flex; align-items:center; justify-content:center;
    font-size:22px;
    flex-shrink:0;
  }

  .badge-student { background:linear-gradient(135deg,#2d7a4f,#5ec987); }
  .badge-teacher { background:linear-gradient(135deg,#1a6a9e,#42b0e8); }
  .badge-school  { background:linear-gradient(135deg,#c47c10,#f5a623); }

  .section-title { font-family:'Playfair Display', serif; font-size:1.4rem; font-weight:700; color:#fff; }
  .section-sub { font-size:0.82rem; color:rgba(255,255,255,0.35); margin-top:2px; }

  /* â”€â”€ FIELD GRID â”€â”€ */
  .field-grid {
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:18px 24px;
    margin-bottom:20px;
  }

  .field-grid .full { grid-column: 1 / -1; }

  .form-group { display:flex; flex-direction:column; }

  label {
    font-size:0.73rem;
    font-weight:800;
    text-transform:uppercase;
    letter-spacing:1.2px;
    color:rgba(212,245,233,0.5);
    margin-bottom:7px;
  }

  .input-wrap { position:relative; }

  .input-icon {
    position:absolute;
    left:13px; top:50%;
    transform:translateY(-50%);
    font-size:15px;
    opacity:0.45;
    pointer-events:none;
  }

  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="tel"],
  input[type="number"],
  input[type="date"],
  select,
  textarea {
    width:100%;
    padding:12px 14px 12px 40px;
    background:rgba(255,255,255,0.04);
    border:1.5px solid rgba(255,255,255,0.09);
    border-radius:12px;
    color:#fff;
    font-family:'Nunito', sans-serif;
    font-size:0.9rem;
    transition:all 0.22s;
    outline:none;
    appearance:none;
  }

  input:focus, select:focus, textarea:focus {
    background:rgba(255,255,255,0.07);
    box-shadow:0 0 0 3px rgba(255,255,255,0.07);
  }

  .theme-student input:focus, .theme-student select:focus, .theme-student textarea:focus {
    border-color:var(--s-main);
    box-shadow:0 0 0 3px var(--s-glow);
  }
  .theme-teacher input:focus, .theme-teacher select:focus, .theme-teacher textarea:focus {
    border-color:var(--t-main);
    box-shadow:0 0 0 3px var(--t-glow);
  }
  .theme-school input:focus, .theme-school select:focus, .theme-school textarea:focus {
    border-color:var(--sc-main);
    box-shadow:0 0 0 3px var(--sc-glow);
  }

  input::placeholder, textarea::placeholder { color:rgba(255,255,255,0.2); }
  select option { background:#1a3a2a; color:#fff; }

  textarea { min-height:90px; resize:vertical; padding-top:12px; }

  .show-pass {
    position:absolute;
    right:12px; top:50%;
    transform:translateY(-50%);
    background:none; border:none;
    color:rgba(255,255,255,0.35);
    cursor:pointer; font-size:14px; padding:0;
    transition:color 0.2s;
  }
  .show-pass:hover { color:rgba(255,255,255,0.7); }

  /* â”€â”€ STRENGTH BAR â”€â”€ */
  .strength-bar {
    height:4px;
    border-radius:4px;
    background:rgba(255,255,255,0.08);
    margin-top:7px;
    overflow:hidden;
  }
  .strength-fill {
    height:100%;
    border-radius:4px;
    width:0%;
    transition:width 0.4s, background 0.4s;
  }
  .strength-text {
    font-size:0.7rem;
    margin-top:4px;
    color:rgba(255,255,255,0.3);
  }

  /* â”€â”€ SUBSECTION DIVIDER â”€â”€ */
  .sub-divider {
    display:flex;
    align-items:center;
    gap:12px;
    margin:24px 0 22px;
  }
  .sub-divider-line { flex:1; height:1px; background:rgba(255,255,255,0.07); }
  .sub-divider-text {
    font-size:0.72rem;
    font-weight:800;
    text-transform:uppercase;
    letter-spacing:1.5px;
    color:rgba(255,255,255,0.2);
    white-space:nowrap;
  }

  /* â”€â”€ CHECKBOX GROUP â”€â”€ */
  .checkbox-grid {
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:10px 16px;
  }

  .cb-item {
    display:flex;
    align-items:center;
    gap:9px;
    font-size:0.85rem;
    color:rgba(255,255,255,0.55);
    cursor:pointer;
    font-weight:600;
  }

  .cb-item input[type="checkbox"] {
    width:16px; height:16px;
    padding:0;
    border-radius:5px;
    accent-color:var(--s-main);
  }

  /* â”€â”€ TERMS â”€â”€ */
  .terms-row {
    display:flex;
    align-items:flex-start;
    gap:10px;
    margin: 20px 0 28px;
    padding:14px 16px;
    background:rgba(255,255,255,0.03);
    border-radius:12px;
    border:1px solid rgba(255,255,255,0.07);
  }

  .terms-row input[type="checkbox"] {
    width:17px; height:17px; flex-shrink:0;
    margin-top:1px; padding:0;
    accent-color:#5ec987;
  }

  .terms-row p {
    font-size:0.82rem;
    color:rgba(255,255,255,0.4);
    line-height:1.5;
  }
  .terms-row a { color:#5ec987; font-weight:700; text-decoration:none; }

  /* â”€â”€ SUBMIT BTN â”€â”€ */
  .btn-submit {
    width:100%;
    padding:16px;
    border:none;
    border-radius:14px;
    font-family:'Nunito', sans-serif;
    font-size:1rem;
    font-weight:800;
    cursor:pointer;
    letter-spacing:0.5px;
    transition:all 0.25s;
    position:relative;
    overflow:hidden;
    color:#061410;
  }

  .btn-student { background:linear-gradient(135deg, #2d7a4f 0%, #5ec987 60%, #a8e63d 100%); }
  .btn-teacher { background:linear-gradient(135deg, #1a6a9e 0%, #42b0e8 60%, #78dfff 100%); }
  .btn-school  { background:linear-gradient(135deg, #c47c10 0%, #f5a623 60%, #ffe066 100%); }

  .btn-submit:hover {
    transform:translateY(-2px);
    filter:brightness(1.1);
  }

  .btn-submit:hover.btn-student { box-shadow:0 12px 36px rgba(94,201,135,0.5); }
  .btn-submit:hover.btn-teacher { box-shadow:0 12px 36px rgba(66,176,232,0.5); }
  .btn-submit:hover.btn-school  { box-shadow:0 12px 36px rgba(245,166,35,0.5); }

  /* â”€â”€ PROGRESS STEPS â”€â”€ */
  .progress-steps {
    display:flex;
    justify-content:center;
    align-items:center;
    gap:0;
    margin-bottom:28px;
    font-size:0.75rem;
    color:rgba(255,255,255,0.3);
    font-weight:700;
  }

  .step-dot {
    width:30px; height:30px;
    border-radius:50%;
    background:rgba(255,255,255,0.06);
    border:1.5px solid rgba(255,255,255,0.12);
    display:flex; align-items:center; justify-content:center;
    font-size:0.72rem;
    font-weight:800;
    transition:all 0.3s;
  }

  .step-dot.done-student { background:rgba(94,201,135,0.2); border-color:#5ec987; color:#5ec987; }
  .step-dot.done-teacher { background:rgba(66,176,232,0.2); border-color:#42b0e8; color:#42b0e8; }
  .step-dot.done-school  { background:rgba(245,166,35,0.2); border-color:#f5a623; color:#f5a623; }

  .step-line { width:50px; height:1.5px; background:rgba(255,255,255,0.08); }

  /* â”€â”€ HIDDEN FORMS â”€â”€ */
  .reg-form { display:none; }
  .reg-form.active { display:block; animation:fadeIn 0.4s ease; }

  @keyframes fadeIn {
    from { opacity:0; transform:translateY(8px); }
    to   { opacity:1; transform:translateY(0); }
  }

  /* â”€â”€ INFO CHIPS â”€â”€ */
  .info-chip {
    display:inline-flex;
    align-items:center;
    gap:6px;
    padding:5px 12px;
    background:rgba(168,230,61,0.08);
    border:1px solid rgba(168,230,61,0.2);
    border-radius:20px;
    font-size:0.72rem;
    color:rgba(168,230,61,0.8);
    font-weight:700;
    text-transform:uppercase;
    letter-spacing:0.8px;
    margin-bottom:18px;
  }

  /* â”€â”€ TOAST â”€â”€ */
  .toast {
    position:fixed;
    bottom:30px; left:50%;
    transform:translateX(-50%) translateY(80px);
    background:rgba(10,28,18,0.95);
    border:1px solid #5ec987;
    color:#5ec987;
    padding:12px 24px;
    border-radius:40px;
    font-size:0.88rem;
    font-weight:800;
    transition:transform 0.4s cubic-bezier(.22,1,.36,1);
    z-index:999;
    white-space:nowrap;
  }
  .toast.show { transform:translateX(-50%) translateY(0); }

  /* RESPONSIVE */
  @media (max-width:640px) {
    .field-grid { grid-template-columns:1fr; }
    .form-card { padding:28px 22px; }
    .role-tab { min-width:auto; padding:14px 18px; }
    .role-tab .tab-desc { display:none; }
  }
</style>
</head>
<body>

<canvas id="bg-canvas"></canvas>
<div class="particle-layer" id="particle-layer"></div>

<!-- Forest -->
<svg class="forest-overlay" viewBox="0 0 1440 200" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
  <path fill="#061410" d="M0,200 L0,120 Q30,70 60,110 Q80,50 110,100 Q130,30 160,90 Q180,20 210,80 Q240,50 270,100 Q290,20 320,90 Q340,60 370,110 Q390,40 420,100 Q440,70 470,120 Q490,30 520,100 Q550,60 570,110 Q600,80 620,130 Q650,50 680,110 Q700,30 730,100 Q760,65 790,115 Q810,35 840,105 Q870,70 900,120 Q920,45 950,110 Q980,80 1010,130 Q1030,50 1060,115 Q1085,75 1110,125 Q1130,45 1160,110 Q1190,80 1220,130 Q1240,60 1270,125 Q1300,85 1330,135 Q1360,65 1390,130 L1440,130 L1440,200 Z"/>
  <path fill="#0a1f14" d="M0,200 L0,160 Q40,120 80,155 Q110,125 140,158 Q170,118 200,152 Q230,130 260,162 Q290,125 320,158 Q360,130 390,163 Q420,135 450,162 Q490,125 520,158 Q550,135 580,163 Q620,125 650,158 Q680,135 710,163 Q740,135 770,162 Q810,135 840,163 Q870,128 900,158 Q940,138 970,168 Q1000,135 1030,162 Q1060,138 1090,168 Q1120,135 1150,162 Q1190,135 1220,162 Q1250,138 1280,168 Q1310,135 1340,162 Q1380,138 1410,168 L1440,162 L1440,200 Z"/>
</svg>

<!-- Header -->
<header>
  <div class="header-brand">
    <div class="logo-icon">ğŸŒ</div>
    <div class="header-brand-name">EcoQuest</div>
  </div>
  <div class="header-right">
    Already have an account? <a href="ecoquest-login.html" id="login-link" onclick="goToLogin(event)">Login â†’</a>
  </div>
</header>

<!-- Main -->
<div class="main-wrap">
  <div class="page-heading">
    <h1>Begin Your <span>Eco Journey</span></h1>
    <p>Choose your role and create your EcoQuest account</p>
  </div>

  <!-- Role Tabs -->
  <div class="role-tabs">
    <button class="role-tab active-student" onclick="switchRole('student', this)">
      <span class="tab-icon">ğŸ“</span>
      <span class="tab-label">Student</span>
      <span class="tab-desc">Explore & Earn</span>
    </button>
    <button class="role-tab" onclick="switchRole('teacher', this)">
      <span class="tab-icon">ğŸ“š</span>
      <span class="tab-label">Teacher</span>
      <span class="tab-desc">Guide & Inspire</span>
    </button>
    <button class="role-tab" onclick="switchRole('school', this)">
      <span class="tab-icon">ğŸ«</span>
      <span class="tab-label">School</span>
      <span class="tab-desc">Admin Access</span>
    </button>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• STUDENT FORM â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="form-card theme-student" id="form-student">
    <div class="section-header">
      <div class="section-badge badge-student">ğŸŒ±</div>
      <div>
        <div class="section-title">Student Registration</div>
        <div class="section-sub">Join thousands of eco-warriors making a difference</div>
      </div>
    </div>

    <div class="info-chip">ğŸ† Earn green XP from day one</div>

    <div class="field-grid">
      <div class="form-group">
        <label>First Name</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ‘¤</span>
          <input type="text" placeholder="Arjun">
        </div>
      </div>
      <div class="form-group">
        <label>Last Name</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ‘¤</span>
          <input type="text" placeholder="Sharma">
        </div>
      </div>
      <div class="form-group">
        <label>Email Address</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ“§</span>
          <input type="email" placeholder="arjun@school.edu">
        </div>
      </div>
      <div class="form-group">
        <label>Phone Number</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ“±</span>
          <input type="tel" placeholder="+91 98765 43210">
        </div>
      </div>
      <div class="form-group">
        <label>Date of Birth</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ‚</span>
          <input type="date">
        </div>
      </div>
      <div class="form-group">
        <label>Grade / Class</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ“–</span>
          <select>
            <option value="">Select grade</option>
            <option>Grade 6</option><option>Grade 7</option><option>Grade 8</option>
            <option>Grade 9</option><option>Grade 10</option><option>Grade 11</option>
            <option>Grade 12</option><option>College â€“ Year 1</option>
            <option>College â€“ Year 2</option><option>College â€“ Year 3</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label>School Name</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ«</span>
          <input type="text" placeholder="Delhi Public School">
        </div>
      </div>
      <div class="form-group">
        <label>School Code (Optional)</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ”‘</span>
          <input type="text" placeholder="ECO-XXXX">
        </div>
      </div>
      <div class="form-group">
        <label>State</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ“</span>
          <select>
            <option value="">Select state</option>
            <option>Maharashtra</option><option>Delhi</option><option>Karnataka</option>
            <option>Tamil Nadu</option><option>Uttar Pradesh</option><option>Gujarat</option>
            <option>Rajasthan</option><option>West Bengal</option><option>Other</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label>Language Preference</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸŒ</span>
          <select>
            <option>English</option><option>Hindi</option><option>Marathi</option>
            <option>Tamil</option><option>Kannada</option><option>Telugu</option>
          </select>
        </div>
      </div>
    </div>

    <div class="sub-divider">
      <div class="sub-divider-line"></div>
      <div class="sub-divider-text">ğŸŒ¿ Eco Interests</div>
      <div class="sub-divider-line"></div>
    </div>

    <label style="margin-bottom:12px;">What environmental topics excite you? (Pick any)</label>
    <div class="checkbox-grid" style="margin-bottom:22px;">
      <label class="cb-item"><input type="checkbox"> ğŸŒŠ Water Conservation</label>
      <label class="cb-item"><input type="checkbox"> ğŸŒ³ Biodiversity</label>
      <label class="cb-item"><input type="checkbox"> â™»ï¸ Waste Management</label>
      <label class="cb-item"><input type="checkbox"> â˜€ï¸ Renewable Energy</label>
      <label class="cb-item"><input type="checkbox"> ğŸŒ¡ï¸ Climate Change</label>
      <label class="cb-item"><input type="checkbox"> ğŸ¦‹ Wildlife Protection</label>
    </div>

    <div class="sub-divider">
      <div class="sub-divider-line"></div>
      <div class="sub-divider-text">ğŸ” Security</div>
      <div class="sub-divider-line"></div>
    </div>

    <div class="field-grid">
      <div class="form-group">
        <label>Password</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ”’</span>
          <input type="password" id="s-pass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" oninput="checkStrength(this,'s-strength-fill','s-strength-text')">
          <button class="show-pass" onclick="tp('s-pass',this)">ğŸ‘</button>
        </div>
        <div class="strength-bar"><div class="strength-fill" id="s-strength-fill"></div></div>
        <div class="strength-text" id="s-strength-text">Enter a password</div>
      </div>
      <div class="form-group">
        <label>Confirm Password</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ”’</span>
          <input type="password" id="s-cpass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
          <button class="show-pass" onclick="tp('s-cpass',this)">ğŸ‘</button>
        </div>
      </div>
    </div>

    <div class="terms-row">
      <input type="checkbox" id="s-terms">
      <p>I agree to EcoQuest's <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>. I understand my data will be used to personalize my learning journey.</p>
    </div>

    <button class="btn-submit btn-student" onclick="handleRegister(event,'student')">
      ğŸŒ± Create Student Account
    </button>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TEACHER FORM â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="reg-form form-card theme-teacher" id="form-teacher">
    <div class="section-header">
      <div class="section-badge badge-teacher">ğŸ“š</div>
      <div>
        <div class="section-title">Teacher Registration</div>
        <div class="section-sub">Empower students with eco-education tools</div>
      </div>
    </div>

    <div class="info-chip" style="background:rgba(66,176,232,0.08);border-color:rgba(66,176,232,0.25);color:rgba(120,223,255,0.8);">
      ğŸ“Š Access real-time classroom analytics
    </div>

    <div class="field-grid">
      <div class="form-group">
        <label>First Name</label>
        <div class="input-wrap"><span class="input-icon">ğŸ‘¤</span><input type="text" placeholder="Priya"></div>
      </div>
      <div class="form-group">
        <label>Last Name</label>
        <div class="input-wrap"><span class="input-icon">ğŸ‘¤</span><input type="text" placeholder="Verma"></div>
      </div>
      <div class="form-group">
        <label>Professional Email</label>
        <div class="input-wrap"><span class="input-icon">ğŸ“§</span><input type="email" placeholder="priya@school.edu"></div>
      </div>
      <div class="form-group">
        <label>Phone Number</label>
        <div class="input-wrap"><span class="input-icon">ğŸ“±</span><input type="tel" placeholder="+91 98765 43210"></div>
      </div>
      <div class="form-group">
        <label>Teacher ID / Employee ID</label>
        <div class="input-wrap"><span class="input-icon">ğŸªª</span><input type="text" placeholder="TCH-2024-001"></div>
      </div>
      <div class="form-group">
        <label>Qualification</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ“</span>
          <select>
            <option value="">Select qualification</option>
            <option>B.Sc Education</option><option>B.Ed</option><option>M.Sc</option>
            <option>M.Ed</option><option>PhD</option><option>Other</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label>School / Institution</label>
        <div class="input-wrap"><span class="input-icon">ğŸ«</span><input type="text" placeholder="Kendriya Vidyalaya No. 1"></div>
      </div>
      <div class="form-group">
        <label>School Code</label>
        <div class="input-wrap"><span class="input-icon">ğŸ”‘</span><input type="text" placeholder="ECO-XXXX"></div>
      </div>
      <div class="form-group">
        <label>Subject(s) Taught</label>
        <div class="input-wrap"><span class="input-icon">ğŸ“</span><input type="text" placeholder="Science, Environmental Studies"></div>
      </div>
      <div class="form-group">
        <label>Years of Experience</label>
        <div class="input-wrap">
          <span class="input-icon">â³</span>
          <select>
            <option value="">Select range</option>
            <option>0-2 years</option><option>3-5 years</option>
            <option>6-10 years</option><option>11-20 years</option><option>20+ years</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label>Grades You Teach</label>
        <div class="input-wrap"><span class="input-icon">ğŸ“–</span><input type="text" placeholder="Grade 8, 9, 10"></div>
      </div>
      <div class="form-group">
        <label>State</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ“</span>
          <select>
            <option value="">Select state</option>
            <option>Maharashtra</option><option>Delhi</option><option>Karnataka</option>
            <option>Tamil Nadu</option><option>Uttar Pradesh</option><option>Gujarat</option>
            <option>Other</option>
          </select>
        </div>
      </div>
    </div>

    <div class="sub-divider">
      <div class="sub-divider-line"></div>
      <div class="sub-divider-text">ğŸŒ¿ Teaching Focus</div>
      <div class="sub-divider-line"></div>
    </div>

    <label style="margin-bottom:12px;">Which eco-topics would you like to integrate?</label>
    <div class="checkbox-grid" style="margin-bottom:22px;">
      <label class="cb-item"><input type="checkbox"> ğŸŒŠ Water & Soil</label>
      <label class="cb-item"><input type="checkbox"> ğŸ­ Pollution Control</label>
      <label class="cb-item"><input type="checkbox"> ğŸŒ³ Forest & Biodiversity</label>
      <label class="cb-item"><input type="checkbox"> â˜€ï¸ Solar & Wind Energy</label>
      <label class="cb-item"><input type="checkbox"> ğŸŒ Climate Science</label>
      <label class="cb-item"><input type="checkbox"> â™»ï¸ Circular Economy</label>
    </div>

    <div class="form-group full" style="margin-bottom:20px;">
      <label>Brief Bio / Teaching Philosophy</label>
      <div class="input-wrap">
        <span class="input-icon" style="top:15px;">âœï¸</span>
        <textarea placeholder="Tell students about your passion for environmental education..."></textarea>
      </div>
    </div>

    <div class="sub-divider">
      <div class="sub-divider-line"></div>
      <div class="sub-divider-text">ğŸ” Security</div>
      <div class="sub-divider-line"></div>
    </div>

    <div class="field-grid">
      <div class="form-group">
        <label>Password</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ”’</span>
          <input type="password" id="t-pass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" oninput="checkStrength(this,'t-strength-fill','t-strength-text')">
          <button class="show-pass" onclick="tp('t-pass',this)">ğŸ‘</button>
        </div>
        <div class="strength-bar"><div class="strength-fill" id="t-strength-fill"></div></div>
        <div class="strength-text" id="t-strength-text">Enter a password</div>
      </div>
      <div class="form-group">
        <label>Confirm Password</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ”’</span>
          <input type="password" id="t-cpass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
          <button class="show-pass" onclick="tp('t-cpass',this)">ğŸ‘</button>
        </div>
      </div>
    </div>

    <div class="terms-row" style="border-color:rgba(66,176,232,0.15);">
      <input type="checkbox" id="t-terms">
      <p>I agree to EcoQuest's <a href="#" style="color:#42b0e8;">Terms of Service</a> and <a href="#" style="color:#42b0e8;">Educator Policy</a>. I confirm I am a registered educator.</p>
    </div>

    <button class="btn-submit btn-teacher" onclick="handleRegister(event,'teacher')">
      ğŸ“š Create Teacher Account
    </button>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• SCHOOL FORM â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="reg-form form-card theme-school" id="form-school">
    <div class="section-header">
      <div class="section-badge badge-school">ğŸ«</div>
      <div>
        <div class="section-title">School Registration</div>
        <div class="section-sub">Onboard your institution to the EcoQuest ecosystem</div>
      </div>
    </div>

    <div class="info-chip" style="background:rgba(245,166,35,0.08);border-color:rgba(245,166,35,0.25);color:rgba(255,224,102,0.8);">
      ğŸ† Unlock school-wide leaderboards & reports
    </div>

    <div class="sub-divider">
      <div class="sub-divider-line"></div>
      <div class="sub-divider-text">ğŸ« Institution Details</div>
      <div class="sub-divider-line"></div>
    </div>

    <div class="field-grid">
      <div class="form-group full">
        <label>Full School / Institution Name</label>
        <div class="input-wrap"><span class="input-icon">ğŸ«</span><input type="text" placeholder="St. Xavier's High School, Mumbai"></div>
      </div>
      <div class="form-group">
        <label>School Type</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ›ï¸</span>
          <select>
            <option value="">Select type</option>
            <option>Government</option><option>Private</option>
            <option>CBSE</option><option>ICSE</option><option>State Board</option>
            <option>International (IB/Cambridge)</option><option>University / College</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label>Affiliation Board</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ“‹</span>
          <select>
            <option value="">Select board</option>
            <option>CBSE</option><option>ICSE/ISC</option><option>Maharashtra SSC</option>
            <option>Karnataka SSLC</option><option>Tamil Nadu HSC</option>
            <option>UP Board</option><option>Other State Board</option><option>IB</option><option>Cambridge</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label>UDISE Code</label>
        <div class="input-wrap"><span class="input-icon">ğŸ”¢</span><input type="text" placeholder="27150900102"></div>
      </div>
      <div class="form-group">
        <label>Year Established</label>
        <div class="input-wrap"><span class="input-icon">ğŸ“…</span><input type="number" placeholder="1985" min="1800" max="2024"></div>
      </div>
      <div class="form-group">
        <label>Number of Students</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ‘¥</span>
          <select>
            <option value="">Approx. strength</option>
            <option>Under 200</option><option>200â€“500</option>
            <option>500â€“1,000</option><option>1,000â€“3,000</option><option>3,000+</option>
          </select>
        </div>
      </div>
    </div>

    <div class="sub-divider">
      <div class="sub-divider-line"></div>
      <div class="sub-divider-text">ğŸ“ Location</div>
      <div class="sub-divider-line"></div>
    </div>

    <div class="field-grid">
      <div class="form-group full">
        <label>Full Address</label>
        <div class="input-wrap"><span class="input-icon">ğŸ“</span><input type="text" placeholder="123, MG Road, Bandra West"></div>
      </div>
      <div class="form-group">
        <label>City</label>
        <div class="input-wrap"><span class="input-icon">ğŸ™ï¸</span><input type="text" placeholder="Mumbai"></div>
      </div>
      <div class="form-group">
        <label>State</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ—ºï¸</span>
          <select>
            <option value="">Select state</option>
            <option>Maharashtra</option><option>Delhi</option><option>Karnataka</option>
            <option>Tamil Nadu</option><option>Uttar Pradesh</option><option>Gujarat</option>
            <option>Rajasthan</option><option>West Bengal</option><option>Other</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label>PIN Code</label>
        <div class="input-wrap"><span class="input-icon">ğŸ“®</span><input type="text" placeholder="400050"></div>
      </div>
    </div>

    <div class="sub-divider">
      <div class="sub-divider-line"></div>
      <div class="sub-divider-text">ğŸ‘¤ Admin / Contact Person</div>
      <div class="sub-divider-line"></div>
    </div>

    <div class="field-grid">
      <div class="form-group">
        <label>Admin Name</label>
        <div class="input-wrap"><span class="input-icon">ğŸ‘¤</span><input type="text" placeholder="Dr. Ravi Kumar"></div>
      </div>
      <div class="form-group">
        <label>Designation</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ·ï¸</span>
          <select>
            <option value="">Select</option>
            <option>Principal</option><option>Vice Principal</option>
            <option>Coordinator</option><option>Admin Head</option><option>Other</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label>Official Email</label>
        <div class="input-wrap"><span class="input-icon">ğŸ“§</span><input type="email" placeholder="admin@stxaviers.edu.in"></div>
      </div>
      <div class="form-group">
        <label>Official Phone</label>
        <div class="input-wrap"><span class="input-icon">ğŸ“</span><input type="tel" placeholder="+91 22 2645 1234"></div>
      </div>
      <div class="form-group">
        <label>School Website (Optional)</label>
        <div class="input-wrap"><span class="input-icon">ğŸŒ</span><input type="text" placeholder="https://stxaviers.edu.in"></div>
      </div>
      <div class="form-group">
        <label>Preferred Plan</label>
        <div class="input-wrap">
          <span class="input-icon">â­</span>
          <select>
            <option>Free â€“ Up to 50 students</option>
            <option>Basic â€“ Up to 200 students</option>
            <option>Standard â€“ Up to 500 students</option>
            <option>Premium â€“ Unlimited</option>
          </select>
        </div>
      </div>
    </div>

    <div class="form-group" style="margin-bottom:20px;">
      <label>Why do you want to join EcoQuest?</label>
      <div class="input-wrap">
        <span class="input-icon" style="top:15px;">âœï¸</span>
        <textarea placeholder="Describe your school's environmental initiatives or goals..."></textarea>
      </div>
    </div>

    <div class="sub-divider">
      <div class="sub-divider-line"></div>
      <div class="sub-divider-text">ğŸ” Admin Credentials</div>
      <div class="sub-divider-line"></div>
    </div>

    <div class="field-grid">
      <div class="form-group">
        <label>Admin Password</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ”’</span>
          <input type="password" id="sc-pass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" oninput="checkStrength(this,'sc-strength-fill','sc-strength-text')">
          <button class="show-pass" onclick="tp('sc-pass',this)">ğŸ‘</button>
        </div>
        <div class="strength-bar"><div class="strength-fill" id="sc-strength-fill"></div></div>
        <div class="strength-text" id="sc-strength-text">Enter a password</div>
      </div>
      <div class="form-group">
        <label>Confirm Password</label>
        <div class="input-wrap">
          <span class="input-icon">ğŸ”’</span>
          <input type="password" id="sc-cpass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
          <button class="show-pass" onclick="tp('sc-cpass',this)">ğŸ‘</button>
        </div>
      </div>
    </div>

    <div class="terms-row" style="border-color:rgba(245,166,35,0.15);">
      <input type="checkbox" id="sc-terms">
      <p>I confirm I am authorized to register this institution. I agree to EcoQuest's <a href="#" style="color:#f5a623;">Institution Terms</a> and <a href="#" style="color:#f5a623;">Data Policy</a>.</p>
    </div>

    <button class="btn-submit btn-school" onclick="handleRegister(event,'school')">
      ğŸ« Register Institution
    </button>
  </div>

</div>

<div class="toast" id="toast"></div>

<script>
// â”€â”€ CANVAS BACKGROUND â”€â”€
const canvas = document.getElementById('bg-canvas');
const ctx = canvas.getContext('2d');
let W, H, mouse = { x: window.innerWidth/2, y: window.innerHeight/2 };
const resize = () => { W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; };
resize(); window.addEventListener('resize', resize);
window.addEventListener('mousemove', e => { mouse.x = e.clientX; mouse.y = e.clientY; });

let currentRole = 'student';
const roleColors = {
  student: { a:'rgba(45,122,79,0.2)', b:'rgba(94,201,135,0.12)', c:'rgba(168,230,61,0.08)' },
  teacher: { a:'rgba(26,106,158,0.2)', b:'rgba(66,176,232,0.12)', c:'rgba(120,223,255,0.06)' },
  school:  { a:'rgba(196,124,16,0.2)', b:'rgba(245,166,35,0.12)', c:'rgba(255,224,102,0.07)' }
};

const orbs = [
  {x:0.15, y:0.25, r:350, sp:0.0003, idx:'a'},
  {x:0.75, y:0.35, r:300, sp:0.0004, idx:'b'},
  {x:0.5,  y:0.7,  r:280, sp:0.0005, idx:'c'},
  {x:0.9,  y:0.8,  r:220, sp:0.0006, idx:'a'},
  {x:0.05, y:0.75, r:260, sp:0.0003, idx:'b'},
];

const stars = Array.from({length:100}, () => ({
  x: Math.random(), y: Math.random(),
  r: Math.random()*1.3+0.3,
  sp: Math.random()*0.004+0.001,
  phase: Math.random()*Math.PI*2
}));

let t = 0;
function draw() {
  t += 0.01;
  const rc = roleColors[currentRole];

  const bg = ctx.createLinearGradient(0,0,0,H);
  bg.addColorStop(0,'#061410'); bg.addColorStop(1,'#0a1c10');
  ctx.fillStyle = bg; ctx.fillRect(0,0,W,H);

  const mg = ctx.createRadialGradient(mouse.x,mouse.y,0,mouse.x,mouse.y,300);
  mg.addColorStop(0,'rgba(255,255,255,0.03)'); mg.addColorStop(1,'transparent');
  ctx.fillStyle = mg; ctx.fillRect(0,0,W,H);

  orbs.forEach((o, i) => {
    const ox = W*(o.x + Math.sin(t*o.sp*100+i)*0.07);
    const oy = H*(o.y + Math.cos(t*o.sp*80+i*1.5)*0.06);
    const g = ctx.createRadialGradient(ox,oy,0,ox,oy,o.r);
    g.addColorStop(0, rc[o.idx]); g.addColorStop(1,'transparent');
    ctx.fillStyle = g; ctx.fillRect(0,0,W,H);
  });

  stars.forEach(s => {
    const alpha = (Math.sin(t*s.sp*100+s.phase)+1)/2*0.65;
    const color = currentRole==='student' ? `rgba(168,230,61,${alpha})`
                : currentRole==='teacher' ? `rgba(120,223,255,${alpha})`
                : `rgba(255,224,102,${alpha})`;
    ctx.beginPath(); ctx.arc(s.x*W, s.y*H*0.8, s.r, 0, Math.PI*2);
    ctx.fillStyle = color; ctx.fill();
  });

  ctx.strokeStyle='rgba(255,255,255,0.025)'; ctx.lineWidth=1;
  for(let x=0;x<W;x+=80){ ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,H);ctx.stroke(); }
  for(let y=0;y<H;y+=80){ ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(W,y);ctx.stroke(); }

  requestAnimationFrame(draw);
}
draw();

// â”€â”€ PARTICLES â”€â”€
const leaves = ['ğŸƒ','ğŸŒ¿','ğŸ€','ğŸŒ±','ğŸ‚','ğŸŒ¾'];
function spawnLeaf() {
  const el = document.createElement('div');
  el.className = 'leaf-particle';
  el.textContent = leaves[Math.floor(Math.random()*leaves.length)];
  el.style.left = Math.random()*100+'vw';
  el.style.fontSize = (Math.random()*14+9)+'px';
  const dur = Math.random()*8+8;
  el.style.animationDuration = dur+'s';
  el.style.animationDelay = (Math.random()*3)+'s';
  document.getElementById('particle-layer').appendChild(el);
  setTimeout(()=>el.remove(),(dur+3)*1000);
}
setInterval(spawnLeaf, 1000);
for(let i=0;i<10;i++) spawnLeaf();

// â”€â”€ ROLE SWITCH â”€â”€
function switchRole(role, btn) {
  currentRole = role;
  document.querySelectorAll('.role-tab').forEach(b => { b.className = 'role-tab'; });
  btn.classList.add('active-' + role);
  ['student','teacher','school'].forEach(r => {
    const el = document.getElementById('form-'+r);
    el.classList.remove('active');
    el.style.display = r === role ? 'block' : 'none';
    el.classList.remove('reg-form');
    if(r === role) { setTimeout(()=>{ el.classList.add('active'); }, 10); }
  });
  // Update URL param without reload
  const url = new URL(window.location);
  url.searchParams.set('role', role);
  window.history.replaceState({}, '', url);
}

// â”€â”€ READ URL PARAMS & AUTO-SELECT ROLE â”€â”€
(function() {
  const params = new URLSearchParams(window.location.search);
  const role = params.get('role');
  if (role && ['student','teacher','school'].includes(role)) {
    const tabMap = { student: 0, teacher: 1, school: 2 };
    const tabs = document.querySelectorAll('.role-tab');
    if (tabs[tabMap[role]]) {
      switchRole(role, tabs[tabMap[role]]);
    }
  } else {
    // Default: show student, hide others
    document.getElementById('form-teacher').style.display = 'none';
    document.getElementById('form-school').style.display  = 'none';
    document.getElementById('form-student').classList.add('active');
  }

  // If coming from login page (after successful login â€” demo flow)
  if (params.get('from') === 'login') {
    setTimeout(() => showToast('ğŸŒ Logged in! Explore EcoQuest.'), 500);
  }
})();

// â”€â”€ PASSWORD TOGGLE â”€â”€
function tp(id, btn) {
  const inp = document.getElementById(id);
  if(inp.type==='password'){ inp.type='text'; btn.textContent='ğŸ™ˆ'; }
  else { inp.type='password'; btn.textContent='ğŸ‘'; }
}

// â”€â”€ STRENGTH â”€â”€
function checkStrength(inp, barId, textId) {
  const v = inp.value;
  const bar = document.getElementById(barId);
  const txt = document.getElementById(textId);
  let score = 0;
  if(v.length >= 8) score++;
  if(/[A-Z]/.test(v)) score++;
  if(/[0-9]/.test(v)) score++;
  if(/[^A-Za-z0-9]/.test(v)) score++;
  const colors = ['#e74c3c','#e67e22','#f5c842','#5ec987'];
  const labels = ['Weak','Fair','Good','Strong ğŸ’ª'];
  const widths = ['25%','50%','75%','100%'];
  if(v.length === 0) { bar.style.width='0'; txt.textContent='Enter a password'; return; }
  const i = Math.min(score-1, 3);
  bar.style.width = widths[i];
  bar.style.background = colors[i];
  txt.textContent = labels[i];
  txt.style.color = colors[i];
}

// â”€â”€ VALIDATION HELPERS â”€â”€
function getFormFields(role) {
  const configs = {
    student: { pass: 's-pass', cpass: 's-cpass', terms: 's-terms' },
    teacher: { pass: 't-pass', cpass: 't-cpass', terms: 't-terms' },
    school:  { pass: 'sc-pass', cpass: 'sc-cpass', terms: 'sc-terms' }
  };
  return configs[role];
}

function validateForm(role) {
  const f = getFormFields(role);
  const pass  = document.getElementById(f.pass).value;
  const cpass = document.getElementById(f.cpass).value;
  const terms = document.getElementById(f.terms).checked;

  // Get all visible required inputs in the active form
  const form = document.getElementById('form-' + role);
  const inputs = form.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"]');
  let emptyCount = 0;
  inputs.forEach(inp => { if (!inp.value.trim() && inp.placeholder !== '(Optional)' && !inp.placeholder.includes('Optional')) emptyCount++; });

  if (emptyCount > 4) {
    showToast('ğŸŒ¿ Please fill in the required fields'); return false;
  }
  if (pass.length < 8) {
    showToast('ğŸ”’ Password must be at least 8 characters'); return false;
  }
  if (pass !== cpass) {
    showToast('âŒ Passwords do not match'); return false;
  }
  if (!terms) {
    showToast('ğŸ“‹ Please accept the terms & conditions'); return false;
  }
  return true;
}

// â”€â”€ REGISTER â”€â”€
async function handleRegister(e, role) {
  e.preventDefault();

  if (!validateForm(role)) return;

  const form = document.getElementById("form-" + role);

  const email = form.querySelector('input[type="email"]').value;
  const firstName = form.querySelector('input[type="text"]').value;

  const password =
    role === "student"
      ? document.getElementById("s-pass").value
      : role === "teacher"
      ? document.getElementById("t-pass").value
      : document.getElementById("sc-pass").value;

  try {
    const response = await fetch("http://localhost:5000/api/auth/register", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        role,
        firstName,
        email,
        password,
      }),
    });

    const data = await response.json();

    if (response.ok) {
      showSuccessOverlay(role);
    } else {
      showToast(data.message);
    }

  } catch (error) {
    showToast("Server not responding âŒ");
  }
}

// â”€â”€ SUCCESS OVERLAY â†’ redirect to login â”€â”€
function showSuccessOverlay(role) {
  const data = {
    student: { icon:'ğŸŒ±', title:'You\'re an Eco-Warrior!', sub:'Your student account is ready.', color:'#5ec987' },
    teacher: { icon:'ğŸ“š', title:'Welcome, Educator!',      sub:'Your teacher account is ready.', color:'#42b0e8' },
    school:  { icon:'ğŸ«', title:'Institution Registered!', sub:'Your school is now on EcoQuest.', color:'#f5a623' }
  };
  const d = data[role];

  const overlay = document.createElement('div');
  overlay.style.cssText = `
    position:fixed; inset:0; z-index:300; display:flex; flex-direction:column;
    align-items:center; justify-content:center;
    background:rgba(6,20,16,0); backdrop-filter:blur(0px);
    transition:background 0.5s, backdrop-filter 0.5s;
  `;
  overlay.innerHTML = `
    <div id="reg-success-box" style="
      text-align:center; transform:scale(0.6) translateY(30px); opacity:0;
      transition:transform 0.55s cubic-bezier(.22,1,.36,1), opacity 0.4s;
      max-width:400px; padding:20px;
    ">
      <div style="
        width:90px;height:90px;border-radius:50%;margin:0 auto 20px;
        background:rgba(255,255,255,0.06);
        display:flex;align-items:center;justify-content:center;
        font-size:3rem;
        box-shadow:0 0 0 0 ${d.color}88;
        animation:successPulse 1s ease infinite;
      ">${d.icon}</div>
      <div style="font-family:'Playfair Display',serif;font-size:2rem;color:#fff;margin-bottom:10px;font-weight:700;">${d.title}</div>
      <div style="color:rgba(255,255,255,0.5);font-size:0.92rem;margin-bottom:6px;">${d.sub}</div>
      <div style="color:rgba(255,255,255,0.35);font-size:0.82rem;margin-bottom:28px;">Redirecting to loginâ€¦</div>
      <div style="
        width:200px;height:4px;border-radius:4px;background:rgba(255,255,255,0.08);
        margin:0 auto; overflow:hidden;
      ">
        <div id="prog-bar" style="height:100%;width:0%;border-radius:4px;background:${d.color};transition:width 1.8s linear;"></div>
      </div>
    </div>
    <style>
      @keyframes successPulse {
        0%  { box-shadow:0 0 0 0 ${d.color}88; }
        70% { box-shadow:0 0 0 20px ${d.color}00; }
        100%{ box-shadow:0 0 0 0 ${d.color}00; }
      }
    </style>
  `;
  document.body.appendChild(overlay);

  requestAnimationFrame(() => {
    overlay.style.background = 'rgba(6,20,16,0.93)';
    overlay.style.backdropFilter = 'blur(24px)';
    setTimeout(() => {
      const box = document.getElementById('reg-success-box');
      box.style.transform = 'scale(1) translateY(0)';
      box.style.opacity = '1';
      setTimeout(() => {
        const pb = document.getElementById('prog-bar');
        if (pb) pb.style.width = '100%';
      }, 100);
    }, 150);
  });

  // Redirect to login with success params
  setTimeout(() => {
    window.location.href = `ecoquest-login.html?registered=1&role=${role}`;
  }, 2300);
}

// â”€â”€ GO TO LOGIN (carry role) â”€â”€
function goToLogin(e) {
  e.preventDefault();
  window.location.href = `ecoquest-login.html?role=${currentRole}`;
}

// â”€â”€ TOAST â”€â”€
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'), 3500);
}
</script>
</body>
</html>